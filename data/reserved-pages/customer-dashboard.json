{
  "html_code": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Customer Dashboard</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 0;\n            background-color: #f4f4f4;\n            color: #333;\n        }\n\n        .container {\n            width: 80%;\n            margin: 20px auto;\n            background-color: #fff;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n        }\n\n        h1 {\n            text-align: center;\n            color: #e44d26; /* red */\n        }\n\n        h2 {\n            color: #e44d26; /* red */\n            border-bottom: 1px solid #e44d26; /* red */\n            padding-bottom: 5px;\n        }\n\n        button {\n            background-color: #e44d26; /* red */\n            color: white;\n            padding: 10px 15px;\n            border: none;\n            border-radius: 5px;\n            cursor: pointer;\n            transition: background-color 0.3s;\n        }\n\n        button:hover {\n            background-color: #c0392b;\n        }\n\n        #taskManagement table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-top: 20px;\n        }\n\n        #taskManagement th, #taskManagement td {\n            border: 1px solid #ddd;\n            padding: 8px;\n            text-align: left;\n        }\n\n        #taskManagement th {\n            background-color: #e44d26; /* red */\n            color: white;\n        }\n\n        .progress-bar {\n            width: 100%;\n            background-color: #ddd;\n            border-radius: 5px;\n            overflow: hidden;\n        }\n\n        .progress {\n            background-color: #e44d26; /* red */\n            height: 20px;\n            color: white;\n            text-align: center;\n            line-height: 20px;\n            width: 0%;\n            transition: width 0.3s;\n        }\n\n        .error-message {\n            color: red;\n            margin-top: 10px;\n        }\n\n        .success-message {\n            color: green;\n            margin-top: 10px;\n        }\n\n        /* User customization: make it red */\n        body {\n            background-color: #ffebee; /* Light red background */\n        }\n\n        .container {\n            border: 1px solid #ef9a9a; /* Light red border */\n        }\n\n        #quickActions button {\n            background-color: #ef5350; /* Slightly darker red for buttons */\n        }\n\n        #quickActions button:hover {\n            background-color: #e53935; /* Even darker red on hover */\n        }\n\n    </style>\n</head>\n<body>\n\n<div class=\"container\">\n    <h1>Customer Dashboard</h1>\n\n    <section id=\"welcomeSection\">\n        <h2>Welcome</h2>\n        <p>User: <span id=\"userName\"></span></p>\n        <p>Email: <span id=\"userEmail\"></span></p>\n    </section>\n\n    <section id=\"planInfo\">\n        <h2>Subscription Plan</h2>\n        <p id=\"planDetails\"></p>\n    </section>\n\n    <section id=\"taskManagement\">\n        <h2>Task Management</h2>\n        <button onclick=\"createTask()\">Create Task</button>\n        <table id=\"taskTable\">\n            <thead>\n            <tr>\n                <th>Title</th>\n                <th>Description</th>\n                <th>Actions</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n        <div id=\"taskMessage\" class=\"error-message\"></div>\n    </section>\n\n    <section id=\"usageMetrics\">\n        <h2>Usage Metrics</h2>\n        <p>API Usage: <span id=\"apiUsage\"></span> / <span id=\"apiLimit\"></span></p>\n        <div class=\"progress-bar\">\n            <div class=\"progress\" id=\"apiProgressBar\"></div>\n        </div>\n        <p>Page Views: <span id=\"pageViews\"></span></p>\n    </section>\n\n    <section id=\"quickActions\">\n        <h2>Quick Actions</h2>\n        <button onclick=\"navigation('profile')\">Profile</button>\n        <button onclick=\"navigation('settings')\">Settings</button>\n        <button onclick=\"navigation('billing')\">Billing</button>\n        <button onclick=\"navigation('upgrade')\">Upgrade</button>\n    </section>\n\n    <section id=\"recentActivity\">\n        <h2>Recent Activity</h2>\n        <p>No recent activity.</p>\n    </section>\n\n    <div id=\"errorMessages\" class=\"error-message\"></div>\n    <div id=\"successMessages\" class=\"success-message\"></div>\n</div>\n\n<script>\n    // Utility Functions (as stubs, since actual implementation injected)\n    function showError(message) {\n        document.getElementById('errorMessages').innerText = message;\n    }\n\n    function showSuccess(message) {\n        document.getElementById('successMessages').innerText = message;\n    }\n\n    function setLoading(element, isLoading) {\n        element.disabled = isLoading;\n        element.innerText = isLoading ? 'Loading...' : element.innerText.replace('Loading...', '');\n    }\n\n    function clearMessages() {\n        document.getElementById('errorMessages').innerText = '';\n        document.getElementById('successMessages').innerText = '';\n    }\n\n    function validateEmail(email) {\n        const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return re.test(String(email).toLowerCase());\n    }\n\n    function validatePassword(password) {\n        return password.length >= 8;\n    }\n\n    function formatCurrency(amount) {\n        return '$' + amount.toFixed(2);\n    }\n\n    function debounce(func, delay) {\n        let timeout;\n        return function(...args) {\n            const context = this;\n            clearTimeout(timeout);\n            timeout = setTimeout(() => func.apply(context, args), delay);\n        };\n    }\n\n    function copyToClipboard(text) {\n        navigator.clipboard.writeText(text).then(() => {\n            showSuccess('Copied to clipboard!');\n        }).catch(err => {\n            showError('Failed to copy: ' + err);\n        });\n    }\n\n    function formatDate(dateString) {\n        const date = new Date(dateString);\n        return date.toLocaleDateString();\n    }\n\n    function sanitizeInput(input) {\n        const div = document.createElement('div');\n        div.textContent = input;\n        return div.innerHTML;\n    }\n\n    // Required Functions\n    async function fetchUserInfo() {\n        try {\n            const response = await fetch('/api/subscribe/me');\n            if (!response.ok) {\n                throw new Error('Failed to fetch user info');\n            }\n            const data = await response.json();\n            document.getElementById('userName').innerText = data.user.username;\n            document.getElementById('userEmail').innerText = data.user.email;\n            document.getElementById('planDetails').innerText = `Plan: ${data.user.plan_name} (Expires: ${formatDate(data.user.subscription_expiry)})`;\n        } catch (error) {\n            showError(error.message);\n        }\n    }\n\n    async function fetchUsageStats() {\n        try {\n            const response = await fetch('/api/subscribe/me');\n            if (!response.ok) {\n                throw new Error('Failed to fetch usage stats');\n            }\n            const data = await response.json();\n            \n            // Update API usage\n            document.getElementById('apiUsage').innerText = data.user.api_calls_used || 0;\n            document.getElementById('apiLimit').innerText = data.user.api_limit || 0;\n            \n            // Update page views\n            document.getElementById('pageViews').innerText = data.user.page_views_used || 0;\n            \n            // Calculate and update progress bar\n            const usagePercentage = data.user.api_limit > 0 \n                ? Math.min(100, Math.round((data.user.api_calls_used / data.user.api_limit) * 100)) \n                : 0;\n                \n            document.getElementById('apiProgressBar').style.width = `${usagePercentage}%`;\n            document.getElementById('apiProgressBar').innerText = `${usagePercentage}%`;\n        } catch (error) {\n            showError('Failed to load usage statistics: ' + error.message);\n        }\n    }\n\n    const route_mapping = {\"profile\":\"/dashboard/profile\",\"settings\":\"/dashboard/profile\",\"billing\":\"/dashboard/upgrade\",\"upgrade\":\"/dashboard/upgrade\"};\n    function navigation(page) {\n        const route = route_mapping[page];\n        if (route) {\n            window.location.href = route;\n        } else {\n            showError(\"Invalid route: \" + page);\n        }\n    }\n\n    async function createTask() {\n        const title = prompt('Enter task title:');\n        const description = prompt('Enter task description:');\n\n        if (!title || !description) {\n            showError('Title and description are required.');\n            return;\n        }\n\n        try {\n            const response = await fetch('/api/tasks', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ title: sanitizeInput(title), description: sanitizeInput(description) }),\n            });\n\n            if (!response.ok) {\n                throw new Error('Failed to create task');\n            }\n\n            const task = await response.json();\n            showSuccess('Task created successfully!');\n            renderTask(task);\n        } catch (error) {\n            showError(error.message);\n        }\n    }\n\n    function renderTask(task) {\n        const tableBody = document.querySelector('#taskTable tbody');\n        const row = document.createElement('tr');\n        row.innerHTML = `\n            <td>${sanitizeInput(task.title)}</td>\n            <td>${sanitizeInput(task.description)}</td>\n            <td>\n                <button onclick=\"deleteTask('${task.id}')\">Delete</button>\n            </td>\n        `;\n        tableBody.appendChild(row);\n    }\n\n    async function deleteTask(taskId) {\n        try {\n            const response = await fetch(`/api/tasks/${taskId}`, {\n                method: 'DELETE',\n            });\n\n            if (!response.ok) {\n                throw new Error('Failed to delete task');\n            }\n\n            showSuccess('Task deleted successfully!');\n            // Remove the task from the table\n            const tableBody = document.querySelector('#taskTable tbody');\n            const rows = tableBody.querySelectorAll('tr');\n            rows.forEach(row => {\n                if (row.innerHTML.includes(`deleteTask('${taskId}')`)) {\n                    tableBody.removeChild(row);\n                }\n            });\n\n\n        } catch (error) {\n            showError(error.message);\n        }\n    }\n\n    // Initial Data Load\n    fetchUserInfo();\n    fetchUsageStats();\n\n</script>\n\n</body>\n</html>",
  "chat_history": [
    {
      "id": 1764793892561,
      "type": "user",
      "content": "make it red",
      "timestamp": "2025-12-03T20:31:32.561Z"
    },
    {
      "id": 1764793910130,
      "type": "ai",
      "content": "Page customization generated!",
      "code": "```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Customer Dashboard</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 0;\n            background-color: #f4f4f4;\n            color: #333;\n        }\n\n        .container {\n            width: 80%;\n            margin: 20px auto;\n            background-color: #fff;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n        }\n\n        h1 {\n            text-align: center;\n            color: #e44d26; /* red */\n        }\n\n        h2 {\n            color: #e44d26; /* red */\n            border-bottom: 1px solid #e44d26; /* red */\n            padding-bottom: 5px;\n        }\n\n        button {\n            background-color: #e44d26; /* red */\n            color: white;\n            padding: 10px 15px;\n            border: none;\n            border-radius: 5px;\n            cursor: pointer;\n            transition: background-color 0.3s;\n        }\n\n        button:hover {\n            background-color: #c0392b;\n        }\n\n        #taskManagement table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-top: 20px;\n        }\n\n        #taskManagement th, #taskManagement td {\n            border: 1px solid #ddd;\n            padding: 8px;\n            text-align: left;\n        }\n\n        #taskManagement th {\n            background-color: #e44d26; /* red */\n            color: white;\n        }\n\n        .progress-bar {\n            width: 100%;\n            background-color: #ddd;\n            border-radius: 5px;\n            overflow: hidden;\n        }\n\n        .progress {\n            background-color: #e44d26; /* red */\n            height: 20px;\n            color: white;\n            text-align: center;\n            line-height: 20px;\n            width: 0%;\n            transition: width 0.3s;\n        }\n\n        .error-message {\n            color: red;\n            margin-top: 10px;\n        }\n\n        .success-message {\n            color: green;\n            margin-top: 10px;\n        }\n\n        /* User customization: make it red */\n        body {\n            background-color: #ffebee; /* Light red background */\n        }\n\n        .container {\n            border: 1px solid #ef9a9a; /* Light red border */\n        }\n\n        #quickActions button {\n            background-color: #ef5350; /* Slightly darker red for buttons */\n        }\n\n        #quickActions button:hover {\n            background-color: #e53935; /* Even darker red on hover */\n        }\n\n    </style>\n</head>\n<body>\n\n<div class=\"container\">\n    <h1>Customer Dashboard</h1>\n\n    <section id=\"welcomeSection\">\n        <h2>Welcome</h2>\n        <p>User: <span id=\"userName\"></span></p>\n        <p>Email: <span id=\"userEmail\"></span></p>\n    </section>\n\n    <section id=\"planInfo\">\n        <h2>Subscription Plan</h2>\n        <p id=\"planDetails\"></p>\n    </section>\n\n    <section id=\"taskManagement\">\n        <h2>Task Management</h2>\n        <button onclick=\"createTask()\">Create Task</button>\n        <table id=\"taskTable\">\n            <thead>\n            <tr>\n                <th>Title</th>\n                <th>Description</th>\n                <th>Actions</th>\n            </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n        <div id=\"taskMessage\" class=\"error-message\"></div>\n    </section>\n\n    <section id=\"usageMetrics\">\n        <h2>Usage Metrics</h2>\n        <p>API Usage: <span id=\"apiUsage\"></span> / <span id=\"apiLimit\"></span></p>\n        <div class=\"progress-bar\">\n            <div class=\"progress\" id=\"apiProgressBar\"></div>\n        </div>\n        <p>Page Views: <span id=\"pageViews\"></span></p>\n    </section>\n\n    <section id=\"quickActions\">\n        <h2>Quick Actions</h2>\n        <button onclick=\"navigation('profile')\">Profile</button>\n        <button onclick=\"navigation('settings')\">Settings</button>\n        <button onclick=\"navigation('billing')\">Billing</button>\n        <button onclick=\"navigation('upgrade')\">Upgrade</button>\n    </section>\n\n    <section id=\"recentActivity\">\n        <h2>Recent Activity</h2>\n        <p>No recent activity.</p>\n    </section>\n\n    <div id=\"errorMessages\" class=\"error-message\"></div>\n    <div id=\"successMessages\" class=\"success-message\"></div>\n</div>\n\n<script>\n    // Utility Functions (as stubs, since actual implementation injected)\n    function showError(message) {\n        document.getElementById('errorMessages').innerText = message;\n    }\n\n    function showSuccess(message) {\n        document.getElementById('successMessages').innerText = message;\n    }\n\n    function setLoading(element, isLoading) {\n        element.disabled = isLoading;\n        element.innerText = isLoading ? 'Loading...' : element.innerText.replace('Loading...', '');\n    }\n\n    function clearMessages() {\n        document.getElementById('errorMessages').innerText = '';\n        document.getElementById('successMessages').innerText = '';\n    }\n\n    function validateEmail(email) {\n        const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return re.test(String(email).toLowerCase());\n    }\n\n    function validatePassword(password) {\n        return password.length >= 8;\n    }\n\n    function formatCurrency(amount) {\n        return '$' + amount.toFixed(2);\n    }\n\n    function debounce(func, delay) {\n        let timeout;\n        return function(...args) {\n            const context = this;\n            clearTimeout(timeout);\n            timeout = setTimeout(() => func.apply(context, args), delay);\n        };\n    }\n\n    function copyToClipboard(text) {\n        navigator.clipboard.writeText(text).then(() => {\n            showSuccess('Copied to clipboard!');\n        }).catch(err => {\n            showError('Failed to copy: ' + err);\n        });\n    }\n\n    function formatDate(dateString) {\n        const date = new Date(dateString);\n        return date.toLocaleDateString();\n    }\n\n    function sanitizeInput(input) {\n        const div = document.createElement('div');\n        div.textContent = input;\n        return div.innerHTML;\n    }\n\n    // Required Functions\n    async function fetchUserInfo() {\n        try {\n            const response = await fetch('/api/subscribe/me');\n            if (!response.ok) {\n                throw new Error('Failed to fetch user info');\n            }\n            const data = await response.json();\n            document.getElementById('userName').innerText = data.username;\n            document.getElementById('userEmail').innerText = data.email;\n            document.getElementById('planDetails').innerText = `Plan: ${data.plan_name} (Expires: ${formatDate(data.subscription_expiry)})`;\n        } catch (error) {\n            showError(error.message);\n        }\n    }\n\n    async function fetchUsageStats() {\n        // Placeholder - Implement actual API call and data binding here\n        document.getElementById('apiUsage').innerText = '50';\n        document.getElementById('apiLimit').innerText = '100';\n        document.getElementById('pageViews').innerText = '250';\n        const usagePercentage = 50; // Example value\n        document.getElementById('apiProgressBar').style.width = `${usagePercentage}%`;\n        document.getElementById('apiProgressBar').innerText = `${usagePercentage}%`;\n    }\n\n    const route_mapping = {\"profile\":\"/dashboard/profile\",\"settings\":\"/dashboard/profile\",\"billing\":\"/dashboard/upgrade\",\"upgrade\":\"/dashboard/upgrade\"};\n    function navigation(page) {\n        const route = route_mapping[page];\n        if (route) {\n            window.location.href = route;\n        } else {\n            showError(\"Invalid route: \" + page);\n        }\n    }\n\n    async function createTask() {\n        const title = prompt('Enter task title:');\n        const description = prompt('Enter task description:');\n\n        if (!title || !description) {\n            showError('Title and description are required.');\n            return;\n        }\n\n        try {\n            const response = await fetch('/api/tasks', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ title: sanitizeInput(title), description: sanitizeInput(description) }),\n            });\n\n            if (!response.ok) {\n                throw new Error('Failed to create task');\n            }\n\n            const task = await response.json();\n            showSuccess('Task created successfully!');\n            renderTask(task);\n        } catch (error) {\n            showError(error.message);\n        }\n    }\n\n    function renderTask(task) {\n        const tableBody = document.querySelector('#taskTable tbody');\n        const row = document.createElement('tr');\n        row.innerHTML = `\n            <td>${sanitizeInput(task.title)}</td>\n            <td>${sanitizeInput(task.description)}</td>\n            <td>\n                <button onclick=\"deleteTask('${task.id}')\">Delete</button>\n            </td>\n        `;\n        tableBody.appendChild(row);\n    }\n\n    async function deleteTask(taskId) {\n        try {\n            const response = await fetch(`/api/tasks/${taskId}`, {\n                method: 'DELETE',\n            });\n\n            if (!response.ok) {\n                throw new Error('Failed to delete task');\n            }\n\n            showSuccess('Task deleted successfully!');\n            // Remove the task from the table\n            const tableBody = document.querySelector('#taskTable tbody');\n            const rows = tableBody.querySelectorAll('tr');\n            rows.forEach(row => {\n                if (row.innerHTML.includes(`deleteTask('${taskId}')`)) {\n                    tableBody.removeChild(row);\n                }\n            });\n\n\n        } catch (error) {\n            showError(error.message);\n        }\n    }\n\n    // Initial Data Load\n    fetchUserInfo();\n    fetchUsageStats();\n\n</script>\n\n</body>\n</html>\n```",
      "tokens_used": 2551,
      "estimated_cost": 0,
      "timestamp": "2025-12-03T20:31:50.129Z"
    }
  ],
  "title": "Customer Dashboard",
  "pageType": "customer-dashboard",
  "lastModified": "2025-12-03T20:31:54.251Z",
  "version": 7,
  "deployed": true,
  "deployedAt": "2025-12-03T20:32:44.579Z"
}