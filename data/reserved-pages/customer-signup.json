{
  "html_code": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Customer Signup</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            background-color: #f8f8f8;\n            color: #333;\n            margin: 0;\n            padding: 0;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            min-height: 100vh;\n        }\n\n        .container {\n            background-color: #fff;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n            width: 400px;\n            text-align: center;\n        }\n\n        h2 {\n            color: #e44d26;\n        }\n\n        label {\n            display: block;\n            margin-bottom: 5px;\n            color: #555;\n        }\n\n        input[type=\"text\"],\n        input[type=\"email\"],\n        input[type=\"password\"] {\n            width: 100%;\n            padding: 8px;\n            margin-bottom: 15px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            box-sizing: border-box;\n        }\n\n        button {\n            background-color: #e44d26;\n            color: white;\n            padding: 10px 15px;\n            border: none;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 16px;\n        }\n\n        button:hover {\n            background-color: #c63d1b;\n        }\n\n        .error-message {\n            color: #dc3545;\n            margin-top: 5px;\n        }\n\n        .success-message {\n            color: #28a745;\n            margin-top: 5px;\n        }\n\n        #otpForm {\n            display: none;\n            margin-top: 20px;\n        }\n\n        #otpForm input[type=\"text\"] {\n            width: 70%;\n            display: inline-block;\n            margin-right: 10px;\n        }\n\n        a {\n            color: #e44d26;\n            text-decoration: none;\n        }\n\n        a:hover {\n            text-decoration: underline;\n        }\n\n        .loading {\n            opacity: 0.7;\n            cursor: wait;\n        }\n        .hidden {\n            display: none;\n        }\n    </style>\n</head>\n<body>\n\n<div class=\"container\">\n    <h2>Create Account</h2>\n    <div id=\"error-message\" class=\"error-message\"></div>\n    <div id=\"success-message\" class=\"success-message\"></div>\n\n    <form id=\"signupForm\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\" required>\n\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" name=\"email\" required>\n\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\" required>\n\n        <label for=\"confirmPassword\">Confirm Password:</label>\n        <input type=\"password\" id=\"confirmPassword\" name=\"confirmPassword\" required>\n\n        <button type=\"button\" id=\"submitButton\" onclick=\"handleSubmit()\">Sign Up</button>\n    </form>\n\n    <form id=\"otpForm\" style=\"display: none;\">\n        <label for=\"otp\">OTP Code:</label>\n        <input type=\"text\" id=\"otp\" name=\"otp\" required>\n        <button type=\"button\" onclick=\"handleOTPSubmit()\">Verify OTP</button>\n        <button type=\"button\" onclick=\"resendOTP()\">Resend OTP</button>\n    </form>\n\n    <p>Already have an account? <a id=\"loginLink\" href=\"/subscribe/login\">Login</a></p>\n</div>\n\n<script>\n    let step_verify = false;\n    let signup_data = {};\n\n    function showError(message) {\n        document.getElementById('error-message').innerText = message;\n        document.getElementById('success-message').innerText = '';\n    }\n\n    function showSuccess(message) {\n        document.getElementById('success-message').innerText = message;\n        document.getElementById('error-message').innerText = '';\n    }\n\n    function setLoading(isLoading) {\n        const submitButton = document.getElementById('submitButton');\n        submitButton.disabled = isLoading;\n        if (isLoading) {\n            submitButton.classList.add('loading');\n            submitButton.innerText = 'Loading...';\n        } else {\n            submitButton.classList.remove('loading');\n            submitButton.innerText = 'Sign Up';\n        }\n\n        const otpButton = document.querySelector('#otpForm button[onclick=\"handleOTPSubmit()\"]');\n         if(otpButton){\n            otpButton.disabled = isLoading;\n            if (isLoading) {\n                otpButton.classList.add('loading');\n                otpButton.innerText = 'Loading...';\n            } else {\n                otpButton.classList.remove('loading');\n                otpButton.innerText = 'Verify OTP';\n            }\n        }\n\n        const resendOtpButton = document.querySelector('#otpForm button[onclick=\"resendOTP()\"]');\n        if(resendOtpButton){\n            resendOtpButton.disabled = isLoading;\n            if (isLoading) {\n                resendOtpButton.classList.add('loading');\n                resendOtpButton.innerText = 'Loading...';\n            } else {\n                resendOtpButton.classList.remove('loading');\n                resendOtpButton.innerText = 'Resend OTP';\n            }\n        }\n\n\n    }\n\n    function clearMessages() {\n        document.getElementById('error-message').innerText = '';\n        document.getElementById('success-message').innerText = '';\n    }\n\n    function validateEmail(email) {\n        const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return re.test(email);\n    }\n\n    function validatePassword(password) {\n        return password.length >= 6;\n    }\n\n    function formatCurrency(amount) {\n       return amount.toLocaleString('en-US', { style: 'currency', currency: 'USD' });\n    }\n\n    function debounce(func, delay) {\n        let timeout;\n        return function(...args) {\n            const context = this;\n            clearTimeout(timeout);\n            timeout = setTimeout(() => func.apply(context, args), delay);\n        }\n    }\n\n    function copyToClipboard(text) {\n        navigator.clipboard.writeText(text).then(() => {\n            showSuccess('Copied to clipboard!');\n        }).catch(err => {\n            showError('Failed to copy: ' + err);\n        });\n    }\n\n    function formatDate(dateString) {\n        const date = new Date(dateString);\n        return date.toLocaleDateString();\n    }\n\n   function sanitizeInput(str) {\n        const map = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return str.replace(/[&<>\"']/g, function(m) { return map[m]; });\n    }\n\n    function show_otp_step() {\n        document.getElementById('signupForm').style.display = 'none';\n        document.getElementById('otpForm').style.display = 'block';\n        step_verify = true;\n    }\n\n    function handleSubmit() {\n        clearMessages();\n        const username = sanitizeInput(document.getElementById('username').value);\n        const email = sanitizeInput(document.getElementById('email').value);\n        const password = sanitizeInput(document.getElementById('password').value);\n        const confirmPassword = sanitizeInput(document.getElementById('confirmPassword').value);\n\n        if (!username || !email || !password || !confirmPassword) {\n            showError('All fields are required.');\n            return;\n        }\n\n        if (!validateEmail(email)) {\n            showError('Invalid email format.');\n            return;\n        }\n\n        if (password !== confirmPassword) {\n            showError('Passwords do not match.');\n            return;\n        }\n\n        if (!validatePassword(password)) {\n            showError('Password must be at least 6 characters long.');\n            return;\n        }\n\n        setLoading(true);\n        try {\n            fetch('/api/subscribe/send-signup-otp', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ username: username, email: email, password: password })\n            })\n            .then(response => {\n                if (!response.ok) {\n                    return response.json().then(err => { throw err; });\n                }\n                return response.json();\n            })\n            .then(data => {\n                setLoading(false);\n                \n                // Show OTP step\n                show_otp_step();\n                signup_data = {username: username, email: email, password: password};\n                \n                // Show appropriate message\n                if (data.defaultOTP) {\n                    showSuccess(data.message || 'Email not configured. Use OTP: 123456 to verify.');\n                } else {\n                    showSuccess(data.message || 'OTP sent to your email.');\n                }\n            })\n            .catch(error => {\n                console.error('Error:', error);\n                setLoading(false);\n                showError(error.message || 'Signup failed. Please try again.');\n            });\n        } catch (error) {\n            setLoading(false);\n            showError(error.message || 'An unexpected error occurred.');\n        }\n    }\n\n    function handleOTPSubmit() {\n        clearMessages();\n        const otp = sanitizeInput(document.getElementById('otp').value);\n        if (!otp) {\n            showError('OTP is required.');\n            return;\n        }\n        setLoading(true);\n        try {\n            fetch('/api/subscribe/verify-signup-otp', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ username: signup_data.username, email: signup_data.email, password: signup_data.password, otp: otp })\n            })\n            .then(response => {\n                if (!response.ok) {\n                   return response.json().then(err => { throw err; });\n                }\n                window.location.href = '/subscribe/login?message=Account created successfully';\n            })\n            .catch(error => {\n                console.error('Error:', error);\n                setLoading(false);\n                showError(error.message || 'OTP verification failed. Please try again.');\n            });\n        } catch (error) {\n            setLoading(false);\n             showError(error.message || 'An unexpected error occurred.');\n        }\n    }\n\n    function resendOTP() {\n        clearMessages();\n        const email = sanitizeInput(document.getElementById('email').value);\n        if (!email) {\n            showError('Email is required.');\n            return;\n        }\n\n        setLoading(true);\n        try {\n            fetch('/api/subscribe/resend-signup-otp', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ email: email })\n            })\n            .then(response => {\n                if (!response.ok) {\n                     return response.json().then(err => { throw err; });\n                }\n                return response.json();\n            })\n            .then(data => {\n                setLoading(false);\n                showSuccess('New OTP resent to your email.');\n            })\n            .catch(error => {\n                console.error('Error:', error);\n                setLoading(false);\n                showError(error.message || 'Failed to resend OTP. Please try again.');\n            });\n        } catch (error) {\n            setLoading(false);\n            showError(error.message || 'An unexpected error occurred.');\n        }\n    }\n\n    function step_management() {\n        if (step_verify) {\n            document.getElementById('signupForm').style.display = 'none';\n            document.getElementById('otpForm').style.display = 'block';\n        } else {\n            document.getElementById('signupForm').style.display = 'block';\n            document.getElementById('otpForm').style.display = 'none';\n        }\n    }\n</script>\n\n</body>\n</html>",
  "chat_history": [
    {
      "id": 1764793512929,
      "type": "user",
      "content": "make it red theme",
      "timestamp": "2025-12-03T20:25:12.929Z"
    },
    {
      "id": 1764793531160,
      "type": "ai",
      "content": "Page customization generated!",
      "code": "```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Customer Signup</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            background-color: #f8f8f8;\n            color: #333;\n            margin: 0;\n            padding: 0;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            min-height: 100vh;\n        }\n\n        .container {\n            background-color: #fff;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n            width: 400px;\n            text-align: center;\n        }\n\n        h2 {\n            color: #e44d26;\n        }\n\n        label {\n            display: block;\n            margin-bottom: 5px;\n            color: #555;\n        }\n\n        input[type=\"text\"],\n        input[type=\"email\"],\n        input[type=\"password\"] {\n            width: 100%;\n            padding: 8px;\n            margin-bottom: 15px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            box-sizing: border-box;\n        }\n\n        button {\n            background-color: #e44d26;\n            color: white;\n            padding: 10px 15px;\n            border: none;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 16px;\n        }\n\n        button:hover {\n            background-color: #c63d1b;\n        }\n\n        .error-message {\n            color: #dc3545;\n            margin-top: 5px;\n        }\n\n        .success-message {\n            color: #28a745;\n            margin-top: 5px;\n        }\n\n        #otpForm {\n            display: none;\n            margin-top: 20px;\n        }\n\n        #otpForm input[type=\"text\"] {\n            width: 70%;\n            display: inline-block;\n            margin-right: 10px;\n        }\n\n        a {\n            color: #e44d26;\n            text-decoration: none;\n        }\n\n        a:hover {\n            text-decoration: underline;\n        }\n\n        .loading {\n            opacity: 0.7;\n            cursor: wait;\n        }\n        .hidden {\n            display: none;\n        }\n    </style>\n</head>\n<body>\n\n<div class=\"container\">\n    <h2>Create Account</h2>\n    <div id=\"error-message\" class=\"error-message\"></div>\n    <div id=\"success-message\" class=\"success-message\"></div>\n\n    <form id=\"signupForm\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\" required>\n\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" name=\"email\" required>\n\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\" required>\n\n        <label for=\"confirmPassword\">Confirm Password:</label>\n        <input type=\"password\" id=\"confirmPassword\" name=\"confirmPassword\" required>\n\n        <button type=\"button\" id=\"submitButton\" onclick=\"handleSubmit()\">Sign Up</button>\n    </form>\n\n    <form id=\"otpForm\" style=\"display: none;\">\n        <label for=\"otp\">OTP Code:</label>\n        <input type=\"text\" id=\"otp\" name=\"otp\" required>\n        <button type=\"button\" onclick=\"handleOTPSubmit()\">Verify OTP</button>\n        <button type=\"button\" onclick=\"resendOTP()\">Resend OTP</button>\n    </form>\n\n    <p>Already have an account? <a id=\"loginLink\" href=\"/subscribe/login\">Login</a></p>\n</div>\n\n<script>\n    let step_verify = false;\n    let signup_data = {};\n\n    function showError(message) {\n        document.getElementById('error-message').innerText = message;\n        document.getElementById('success-message').innerText = '';\n    }\n\n    function showSuccess(message) {\n        document.getElementById('success-message').innerText = message;\n        document.getElementById('error-message').innerText = '';\n    }\n\n    function setLoading(isLoading) {\n        const submitButton = document.getElementById('submitButton');\n        submitButton.disabled = isLoading;\n        if (isLoading) {\n            submitButton.classList.add('loading');\n            submitButton.innerText = 'Loading...';\n        } else {\n            submitButton.classList.remove('loading');\n            submitButton.innerText = 'Sign Up';\n        }\n\n        const otpButton = document.querySelector('#otpForm button[onclick=\"handleOTPSubmit()\"]');\n         if(otpButton){\n            otpButton.disabled = isLoading;\n            if (isLoading) {\n                otpButton.classList.add('loading');\n                otpButton.innerText = 'Loading...';\n            } else {\n                otpButton.classList.remove('loading');\n                otpButton.innerText = 'Verify OTP';\n            }\n        }\n\n        const resendOtpButton = document.querySelector('#otpForm button[onclick=\"resendOTP()\"]');\n        if(resendOtpButton){\n            resendOtpButton.disabled = isLoading;\n            if (isLoading) {\n                resendOtpButton.classList.add('loading');\n                resendOtpButton.innerText = 'Loading...';\n            } else {\n                resendOtpButton.classList.remove('loading');\n                resendOtpButton.innerText = 'Resend OTP';\n            }\n        }\n\n\n    }\n\n    function clearMessages() {\n        document.getElementById('error-message').innerText = '';\n        document.getElementById('success-message').innerText = '';\n    }\n\n    function validateEmail(email) {\n        const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return re.test(email);\n    }\n\n    function validatePassword(password) {\n        return password.length >= 6;\n    }\n\n    function formatCurrency(amount) {\n       return amount.toLocaleString('en-US', { style: 'currency', currency: 'USD' });\n    }\n\n    function debounce(func, delay) {\n        let timeout;\n        return function(...args) {\n            const context = this;\n            clearTimeout(timeout);\n            timeout = setTimeout(() => func.apply(context, args), delay);\n        }\n    }\n\n    function copyToClipboard(text) {\n        navigator.clipboard.writeText(text).then(() => {\n            showSuccess('Copied to clipboard!');\n        }).catch(err => {\n            showError('Failed to copy: ' + err);\n        });\n    }\n\n    function formatDate(dateString) {\n        const date = new Date(dateString);\n        return date.toLocaleDateString();\n    }\n\n   function sanitizeInput(str) {\n        const map = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return str.replace(/[&<>\"']/g, function(m) { return map[m]; });\n    }\n\n    function show_otp_step() {\n        document.getElementById('signupForm').style.display = 'none';\n        document.getElementById('otpForm').style.display = 'block';\n        step_verify = true;\n    }\n\n    function handleSubmit() {\n        clearMessages();\n        const username = sanitizeInput(document.getElementById('username').value);\n        const email = sanitizeInput(document.getElementById('email').value);\n        const password = sanitizeInput(document.getElementById('password').value);\n        const confirmPassword = sanitizeInput(document.getElementById('confirmPassword').value);\n\n        if (!username || !email || !password || !confirmPassword) {\n            showError('All fields are required.');\n            return;\n        }\n\n        if (!validateEmail(email)) {\n            showError('Invalid email format.');\n            return;\n        }\n\n        if (password !== confirmPassword) {\n            showError('Passwords do not match.');\n            return;\n        }\n\n        if (!validatePassword(password)) {\n            showError('Password must be at least 6 characters long.');\n            return;\n        }\n\n        setLoading(true);\n        try {\n            fetch('/api/subscribe/send-signup-otp', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ username: username, email: email, password: password })\n            })\n            .then(response => {\n                if (!response.ok) {\n                    return response.json().then(err => { throw err; });\n                }\n                return response.json();\n            })\n            .then(data => {\n                setLoading(false);\n                show_otp_step();\n                signup_data = {username: username, email: email, password: password};\n                showSuccess('OTP sent to your email.');\n\n            })\n            .catch(error => {\n                console.error('Error:', error);\n                setLoading(false);\n                showError(error.message || 'Signup failed. Please try again.');\n            });\n        } catch (error) {\n            setLoading(false);\n            showError(error.message || 'An unexpected error occurred.');\n        }\n    }\n\n    function handleOTPSubmit() {\n        clearMessages();\n        const otp = sanitizeInput(document.getElementById('otp').value);\n        if (!otp) {\n            showError('OTP is required.');\n            return;\n        }\n        setLoading(true);\n        try {\n            fetch('/api/subscribe/verify-signup-otp', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ username: signup_data.username, email: signup_data.email, password: signup_data.password, otp: otp })\n            })\n            .then(response => {\n                if (!response.ok) {\n                   return response.json().then(err => { throw err; });\n                }\n                window.location.href = '/subscribe/login?message=Account created successfully';\n            })\n            .catch(error => {\n                console.error('Error:', error);\n                setLoading(false);\n                showError(error.message || 'OTP verification failed. Please try again.');\n            });\n        } catch (error) {\n            setLoading(false);\n             showError(error.message || 'An unexpected error occurred.');\n        }\n    }\n\n    function resendOTP() {\n        clearMessages();\n        const email = sanitizeInput(document.getElementById('email').value);\n        if (!email) {\n            showError('Email is required.');\n            return;\n        }\n\n        setLoading(true);\n        try {\n            fetch('/api/subscribe/resend-signup-otp', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ email: email })\n            })\n            .then(response => {\n                if (!response.ok) {\n                     return response.json().then(err => { throw err; });\n                }\n                return response.json();\n            })\n            .then(data => {\n                setLoading(false);\n                showSuccess('New OTP resent to your email.');\n            })\n            .catch(error => {\n                console.error('Error:', error);\n                setLoading(false);\n                showError(error.message || 'Failed to resend OTP. Please try again.');\n            });\n        } catch (error) {\n            setLoading(false);\n            showError(error.message || 'An unexpected error occurred.');\n        }\n    }\n\n    function step_management() {\n        if (step_verify) {\n            document.getElementById('signupForm').style.display = 'none';\n            document.getElementById('otpForm').style.display = 'block';\n        } else {\n            document.getElementById('signupForm').style.display = 'block';\n            document.getElementById('otpForm').style.display = 'none';\n        }\n    }\n</script>\n\n</body>\n</html>\n```",
      "tokens_used": 2949,
      "estimated_cost": 0,
      "timestamp": "2025-12-03T20:25:31.159Z"
    }
  ],
  "title": "Customer Signup Page",
  "pageType": "customer-signup",
  "lastModified": "2025-12-04T15:42:00.625Z",
  "version": 1
}